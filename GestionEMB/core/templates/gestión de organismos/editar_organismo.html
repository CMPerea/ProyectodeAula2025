<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Organismo - Sistema EM&B</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f5f5f5;
            color: #525252;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 260px;
            height: 100vh;
            background: #FFFFFF;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05);
            padding: 2rem 0;
            z-index: 100;
        }

        .logo {
            padding: 0 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 2rem;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: #0077B6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #FFFFFF;
            font-size: 1.2rem;
        }

        .logo-text h2 {
            color: #0077B6;
            font-size: 1.2rem;
        }

        .nav-item {
            padding: 0.75rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: #555555;
            text-decoration: none;
            transition: all 0.2s;
            cursor: pointer;
        }

        .nav-item:hover {
            background: #f3f4f6;
            color: #0077B6;
        }

        .nav-item.active {
            background: #e6f3f9;
            color: #0077B6;
            border-right: 3px solid #0077B6;
        }

        /* Main Content */
        .main-content {
            margin-left: 260px;
            min-height: 100vh;
        }

        /* Top Bar */
        .top-bar {
            background: #FFFFFF;
            padding: 1.5rem 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: #9ca3af;
            font-size: 0.9rem;
        }

        .breadcrumb a {
            color: #0077B6;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        /* Page Header */
        .page-header {
            padding: 2rem;
            background: #FFFFFF;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left h1 {
            color: #525252;
            font-size: 1.75rem;
            margin-bottom: 0.5rem;
        }

        .header-left p {
            color: #9ca3af;
            font-size: 0.95rem;
        }

        .header-right {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 0.5rem;
        }

        .organism-id {
            color: #9ca3af;
            font-size: 0.85rem;
        }

        .last-updated {
            color: #555555;
            font-size: 0.85rem;
        }

        /* Form Container */
        .form-container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem 2rem;
        }

        .form-card {
            background: #FFFFFF;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            overflow: hidden;
        }

        .form-section {
            padding: 2rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .form-section:last-child {
            border-bottom: none;
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: #525252;
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
        }

        .section-icon {
            width: 40px;
            height: 40px;
            background: #e6f3f9;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #0077B6;
            font-size: 1.2rem;
        }

        /* Form Grid */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .form-grid.triple {
            grid-template-columns: repeat(3, 1fr);
        }

        .form-grid.single {
            grid-template-columns: 1fr;
        }

        /* Form Groups */
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-label {
            color: #525252;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .required {
            color: #ef4444;
        }

        .form-hint {
            color: #9ca3af;
            font-size: 0.85rem;
            margin-top: -0.25rem;
        }

        /* Input Styles */
        .form-input,
        .form-select,
        .form-textarea {
            padding: 0.75rem 1rem;
            border: 1.5px solid #e5e7eb;
            border-radius: 8px;
            font-size: 0.95rem;
            color: #525252;
            font-family: inherit;
            transition: all 0.2s;
            background: #FFFFFF;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #0077B6;
            box-shadow: 0 0 0 3px rgba(0, 119, 182, 0.08);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-select {
            cursor: pointer;
        }

        /* Image Preview */
        .image-preview-area {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .image-preview-card {
            position: relative;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
            aspect-ratio: 1;
        }

        .image-preview-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .image-preview-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
            padding: 0.75rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .image-name {
            color: #FFFFFF;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .btn-remove-image {
            background: #ef4444;
            color: #FFFFFF;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }

        /* File Upload */
        .file-upload-area {
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            padding: 2rem;
            text-align: center;
            transition: all 0.2s;
            cursor: pointer;
        }

        .file-upload-area:hover {
            border-color: #0077B6;
            background: #f8fbfd;
        }

        .upload-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #9ca3af;
        }

        .upload-text h3 {
            color: #525252;
            font-size: 1rem;
            margin-bottom: 0.5rem;
        }

        .upload-text p {
            color: #9ca3af;
            font-size: 0.85rem;
        }

        .file-input {
            display: none;
        }

        /* Info Box */
        .info-box {
            background: #eff6ff;
            border-left: 4px solid #0077B6;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1.5rem;
        }

        .info-box p {
            color: #1e40af;
            font-size: 0.9rem;
            line-height: 1.6;
        }

        /* Type Badge */
        .type-badges {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .type-badge {
            position: relative;
        }

        .type-badge input[type="radio"] {
            position: absolute;
            opacity: 0;
        }

        .type-label {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.6rem 1.2rem;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }

        .type-badge input[type="radio"]:checked + .type-label {
            border-color: #0077B6;
            background: #e6f3f9;
            color: #0077B6;
        }

        /* Form Actions */
        .form-actions {
            padding: 1.5rem 2rem;
            background: #f9fafb;
            border-top: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: #0077B6;
            color: #FFFFFF;
        }

        .btn-primary:hover {
            background: #006399;
            box-shadow: 0 4px 12px rgba(0, 119, 182, 0.25);
        }

        .btn-secondary {
            background: #FFFFFF;
            color: #525252;
            border: 1.5px solid #e5e7eb;
        }

        .btn-secondary:hover {
            background: #f9fafb;
        }

        .btn-danger {
            background: transparent;
            color: #ef4444;
        }

        .btn-danger:hover {
            background: #fee2e2;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .main-content {
                margin-left: 0;
            }
        }

        @media (max-width: 768px) {
            .form-grid,
            .form-grid.triple {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="logo">
            <div class="logo-icon">üî¨</div>
            <div class="logo-text">
                <h2>EM&B</h2>
            </div>
        </div>
        <a href="#" class="nav-item">üè† Dashboard</a>
        <a href="#" class="nav-item">üìã Protocolos</a>
        <a href="#" class="nav-item active">ü¶† Organismos</a>
        <a href="#" class="nav-item">‚öôÔ∏è Equipos</a>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="breadcrumb">
                <a href="#">Dashboard</a>
                <span>/</span>
                <a href="#">Organismos</a>
                <span>/</span>
                <span>Editar Organismo</span>
            </div>
        </div>

        <!-- Page Header -->
        <div class="page-header">
            <div class="header-left">
                <h1>Editar Organismo</h1>
                <p>Modifique la informaci√≥n taxon√≥mica y morfol√≥gica del microorganismo</p>
            </div>
            <div class="header-right">
                <div class="organism-id">C√≥digo: ORG-EMB-001</div>
                <div class="last-updated">√öltima actualizaci√≥n: 10/09/2024 16:45</div>
            </div>
        </div>

        <!-- Form Container -->
        <div class="form-container">
            <form id="editOrganismForm" class="form-card">
                <!-- Informaci√≥n Taxon√≥mica -->
                <div class="form-section">
                    <h2 class="section-title">
                        <span class="section-icon">üß¨</span>
                        Informaci√≥n Taxon√≥mica
                    </h2>

                    <div class="info-box">
                        <p><strong>Nota:</strong> La nomenclatura debe seguir las normas del C√≥digo Internacional de Nomenclatura. Los campos marcados con <span class="required">*</span> son obligatorios.</p>
                    </div>

                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label class="form-label">
                                Tipo de Organismo <span class="required">*</span>
                            </label>
                            <div class="type-badges">
                                <div class="type-badge">
                                    <input type="radio" id="actinobacteria" name="tipo" value="actinobacteria" checked>
                                    <label for="actinobacteria" class="type-label">
                                        ü¶† Actinobacteria
                                    </label>
                                </div>
                                <div class="type-badge">
                                    <input type="radio" id="levadura" name="tipo" value="levadura">
                                    <label for="levadura" class="type-label">
                                        üî¨ Levadura
                                    </label>
                                </div>
                                <div class="type-badge">
                                    <input type="radio" id="hongo" name="tipo" value="hongo_filamentoso">
                                    <label for="hongo" class="type-label">
                                        üçÑ Hongo Filamentoso
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group full-width">
                            <label class="form-label">
                                Nombre Cient√≠fico <span class="required">*</span>
                            </label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="nombre_cientifico"
                                name="nombre_cientifico"
                                value="Streptomyces coelicolor"
                                placeholder="G√©nero especie"
                                required
                            >
                            <p class="form-hint">Formato: G√©nero especie (en cursiva en publicaciones)</p>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Cepa/C√≥digo <span class="required">*</span>
                            </label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="cepa"
                                name="cepa"
                                value="EMB-ACT-001"
                                placeholder="Ej: EMB-ACT-001"
                                required
                            >
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Reino
                            </label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="reino"
                                name="reino"
                                value="Bacteria"
                                placeholder="Ej: Bacteria, Fungi"
                            >
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Filo
                            </label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="filo"
                                name="filo"
                                value="Actinobacteria"
                                placeholder="Ej: Actinobacteria, Ascomycota"
                            >
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Clase
                            </label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="clase"
                                name="clase"
                                value="Actinobacteria"
                                placeholder="Ej: Actinobacteria, Saccharomycetes"
                            >
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Orden
                            </label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="orden"
                                name="orden"
                                value="Streptomycetales"
                                placeholder="Ej: Streptomycetales"
                            >
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Familia
                            </label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="familia"
                                name="familia"
                                value="Streptomycetaceae"
                                placeholder="Ej: Streptomycetaceae"
                            >
                        </div>
                    </div>
                </div>

                <!-- Origen y Procedencia -->
                <div class="form-section">
                    <h2 class="section-title">
                        <span class="section-icon">üìç</span>
                        Origen y Procedencia
                    </h2>

                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label class="form-label">
                                Origen del Aislamiento <span class="required">*</span>
                            </label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="origen"
                                name="origen"
                                value="Suelo rizosf√©rico de Theobroma cacao"
                                placeholder="Ej: Suelo rizosf√©rico, hojas fermentadas, fruto"
                                required
                            >
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Ubicaci√≥n Geogr√°fica
                            </label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="ubicacion"
                                name="ubicacion"
                                value="Apartad√≥, Antioquia, Colombia"
                                placeholder="Ciudad, Departamento, Pa√≠s"
                            >
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Fecha de Aislamiento
                            </label>
                            <input 
                                type="date" 
                                class="form-input" 
                                id="fecha_aislamiento"
                                name="fecha_aislamiento"
                                value="2024-03-15"
                            >
                        </div>

                        <div class="form-group full-width">
                            <label class="form-label">
                                Aislado por
                            </label>
                            <select class="form-select" id="aislado_por" name="aislado_por">
                                <option value="">Seleccione el investigador</option>
                                <option value="1" selected>Carlos Perea</option>
                                <option value="2">Gabriela Ram√≠rez</option>
                                <option value="3">Sura Rueda</option>
                                <option value="4">Pilar Lizarazo</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Caracter√≠sticas Morfol√≥gicas -->
                <div class="form-section">
                    <h2 class="section-title">
                        <span class="section-icon">üî¨</span>
                        Caracter√≠sticas Morfol√≥gicas
                    </h2>

                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">
                                Color de Colonia
                            </label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="color_colonia"
                                name="color_colonia"
                                value="Gris oscuro con micelio a√©reo blanco"
                                placeholder="Ej: Blanco cremoso, amarillo"
                            >
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Forma de Colonia
                            </label>
                            <select class="form-select" id="forma_colonia" name="forma_colonia">
                                <option value="">Seleccione</option>
                                <option value="circular" selected>Circular</option>
                                <option value="irregular">Irregular</option>
                                <option value="filamentosa">Filamentosa</option>
                                <option value="puntiforme">Puntiforme</option>
                                <option value="rizoide">Rizoide</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Elevaci√≥n
                            </label>
                            <select class="form-select" id="elevacion" name="elevacion">
                                <option value="">Seleccione</option>
                                <option value="plana">Plana</option>
                                <option value="elevada" selected>Elevada</option>
                                <option value="convexa">Convexa</option>
                                <option value="umbonada">Umbonada</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Borde
                            </label>
                            <select class="form-select" id="borde" name="borde">
                                <option value="">Seleccione</option>
                                <option value="entero" selected>Entero</option>
                                <option value="ondulado">Ondulado</option>
                                <option value="lobulado">Lobulado</option>
                                <option value="filamentoso">Filamentoso</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Textura
                            </label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="textura"
                                name="textura"
                                value="Polvorienta con micelio a√©reo"
                                placeholder="Ej: Lisa, rugosa, mucosa"
                            >
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Tinci√≥n Gram
                            </label>
                            <select class="form-select" id="gram" name="gram">
                                <option value="">No aplica/No realizada</option>
                                <option value="positiva" selected>Gram Positiva</option>
                                <option value="negativa">Gram Negativa</option>
                                <option value="variable">Variable</option>
                            </select>
                        </div>

                        <div class="form-group full-width">
                            <label class="form-label">
                                Observaciones Microsc√≥picas
                            </label>
                            <textarea 
                                class="form-textarea" 
                                id="observaciones_micro"
                                name="observaciones_micro"
                                placeholder="Describa caracter√≠sticas microsc√≥picas: forma celular, esporulaci√≥n, estructuras especiales..."
                            >Hifas ramificadas no septadas. Cadenas de esporas en espiral. Esporangios globosos con esporangi√≥foros rectos. Presencia de micelio a√©reo abundante.</textarea>
                        </div>
                    </div>
                </div>

                <!-- Condiciones de Cultivo -->
                <div class="form-section">
                    <h2 class="section-title">
                        <span class="section-icon">‚öóÔ∏è</span>
                        Condiciones de Cultivo
                    </h2>

                    <div class="form-grid triple">
                        <div class="form-group">
                            <label class="form-label">
                                Medio de Cultivo √ìptimo
                            </label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="medio_cultivo"
                                name="medio_cultivo"
                                value="ISP-2 (Yeast Extract-Malt Extract Agar)"
                                placeholder="Ej: PDA, ISP-2, LB"
                            >
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Temperatura √ìptima (¬∞C)
                            </label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="temperatura"
                                name="temperatura"
                                value="28-30"
                                placeholder="Ej: 25, 28-30, 37"
                            >
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                pH √ìptimo
                            </label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="ph_optimo"
                                name="ph_optimo"
                                value="7.0-7.5"
                                placeholder="Ej: 5.5, 7.0, 6.5-7.5"
                            >
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Tiempo de Incubaci√≥n
                            </label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="tiempo_incubacion"
                                name="tiempo_incubacion"
                                value="7-14 d√≠as"
                                placeholder="Ej: 24-48h, 5-7 d√≠as"
                            >
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Condiciones de Ox√≠geno
                            </label>
                            <select class="form-select" id="oxigeno" name="oxigeno">
                                <option value="">Seleccione</option>
                                <option value="aerobio" selected>Aerobio</option>
                                <option value="anaerobio">Anaerobio</option>
                                <option value="facultativo">Anaerobio Facultativo</option>
                                <option value="microaerofilico">Microaer√≥filo</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                M√©todo de Conservaci√≥n
                            </label>
                            <input 
                                type="text" 
                                class="form-input" 
                                id="conservacion"
                                name="conservacion"
                                value="Glicerol 20% a -80¬∞C"
                                placeholder="Ej: Glicerol -80¬∞C, Liofilizado"
                            >
                        </div>
                    </div>
                </div>

                <!-- Im√°genes Microsc√≥picas -->
                <div class="form-section">
                    <h2 class="section-title">
                        <span class="section-icon">üì∏</span>
                        Im√°genes Microsc√≥picas
                    </h2>

                    <div class="form-group">
                        <label class="form-label">Im√°genes Actuales</label>
                        <div class="image-preview-area">
                            <div class="image-preview-card">
                                <img src="https://via.placeholder.com/300x300/e6f3f9/0077B6?text=Microscopia+1" alt="Imagen microsc√≥pica 1">
                                <div class="image-preview-overlay">
                                    <span class="image-name">microscopia_colonia.jpg</span>
                                    <button type="button" class="btn-remove-image" onclick="eliminarImagen(1)">‚úï</button>
                                </div>
                            </div>
                            <div class="image-preview-card">
                                <img src="https://via.placeholder.com/300x300/e6f3f9/0077B6?text=Microscopia+2" alt="Imagen microsc√≥pica 2">
                                <div class="image-preview-overlay">
                                    <span class="image-name">microscopia_esporas.jpg</span>
                                    <button type="button" class="btn-remove-image" onclick="eliminarImagen(2)">‚úï</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" style="margin-top: 1.5rem;">
                        <label class="form-label">Agregar Nuevas Im√°genes</label>
                        <div class="file-upload-area" id="dropZone">
                            <div class="upload-icon">üñºÔ∏è</div>
                            <div class="upload-text">
                                <h3>Arrastra im√°genes aqu√≠ o haz clic para seleccionar</h3>
                                <p>JPG, PNG (M√°x. 5MB por imagen) - Microscop√≠a, colonias, estructuras</p>
                            </div>
                            <input type="file" id="imageInput" class="file-input" multiple accept=".jpg,.jpeg,.png">
                        </div>
                        <div class="image-preview-area" id="newImagePreview"></div>
                    </div>
                </div>

                <!-- Notas Adicionales -->
                <div class="form-section">
                    <h2 class="section-title">
                        <span class="section-icon">üìù</span>
                        Notas y Observaciones
                    </h2>

                    <div class="form-grid single">
                        <div class="form-group">
                            <label class="form-label">
                                Propiedades de Inter√©s
                            </label>
                            <textarea 
                                class="form-textarea" 
                                id="propiedades"
                                name="propiedades"
                                placeholder="Actividades enzim√°ticas, producci√≥n de metabolitos, actividad antimicrobiana..."
                            >Producci√≥n de compuestos con actividad antif√∫ngica contra Moniliophthora roreri. Actividad quitinasa detectada. Potencial para biocontrol en cultivos de cacao.</textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Protocolos Asociados
                            </label>
                            <select class="form-select" id="protocolos" name="protocolos" multiple size="4">
                                <option value="1" selected>Aislamiento de Actinobacterias del Cacao</option>
                                <option value="2" selected>Evaluaci√≥n de Antagonismo in vitro</option>
                                <option value="3">Extracci√≥n de ADN por CTAB</option>
                                <option value="4">Preparaci√≥n de Medio ISP-2</option>
                            </select>
                            <p class="form-hint">Mant√©n presionado Ctrl (Cmd en Mac) para seleccionar m√∫ltiples</p>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Referencias Bibliogr√°ficas
                            </label>
                            <textarea 
                                class="form-textarea" 
                                id="referencias"
                                name="referencias"
                                placeholder="Publicaciones, art√≠culos o estudios relacionados con este organismo..."
                            >1. K√§mpfer, P. (2012). Genus Streptomyces. Bergey's Manual of Systematic Bacteriology.
2. Goodfellow, M. et al. (2012). Biology and Biotechnology of Actinobacteria. Academic Press.</textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Notas Generales
                            </label>
                            <textarea 
                                class="form-textarea" 
                                id="notas"
                                name="notas"
                                placeholder="Observaciones adicionales, comportamiento especial, precauciones..."
                            >Cepa muy promisoria para control biol√≥gico. Se recomienda subcultivo cada 30 d√≠as. Mantener stock de trabajo a 4¬∞C y stock maestro a -80¬∞C con glicerol 20%.</textarea>
                        </div>
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="form-actions">
                    <button type="button" class="btn btn-danger" onclick="cancelarEdicion()">
                        ‚úï Cancelar Cambios
                    </button>
                    <div style="display: flex; gap: 1rem;">
                        <button type="button" class="btn btn-secondary" onclick="exportarFicha()">
                            üìÑ Exportar Ficha
                        </button>
                        <button type="submit" class="btn btn-primary">
                            ‚úì Guardar Cambios
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </main>

    <script>
        // Image upload
        const dropZone = document.getElementById('dropZone');
        const imageInput = document.getElementById('imageInput');
        const newImagePreview = document.getElementById('newImagePreview');
        let uploadedImages = [];

        dropZone.addEventListener('click', () => imageInput.click());

        dropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropZone.style.borderColor = '#0077B6';
            dropZone.style.background = '#e6f3f9';
        });

        dropZone.addEventListener('dragleave', () => {
            dropZone.style.borderColor = '#d1d5db';
            dropZone.style.background = 'transparent';
        });

        dropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            dropZone.style.borderColor = '#d1d5db';
            dropZone.style.background = 'transparent';
            handleImages(e.dataTransfer.files);
        });

        imageInput.addEventListener('change', (e) => {
            handleImages(e.target.files);
        });

        function handleImages(files) {
            Array.from(files).forEach(file => {
                if (!file.type.startsWith('image/')) {
                    alert('Por favor seleccione solo archivos de imagen');
                    return;
                }
                if (file.size > 5 * 1024 * 1024) {
                    alert(`La imagen ${file.name} excede el tama√±o m√°ximo de 5MB`);
                    return;
                }
                uploadedImages.push(file);
                previewImage(file);
            });
        }

        function previewImage(file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const card = document.createElement('div');
                card.className = 'image-preview-card';
                card.innerHTML = `
                    <img src="${e.target.result}" alt="${file.name}">
                    <div class="image-preview-overlay">
                        <span class="image-name">${file.name}</span>
                        <button type="button" class="btn-remove-image" onclick="removeNewImage('${file.name}')">‚úï</button>
                    </div>
                `;
                newImagePreview.appendChild(card);
            };
            reader.readAsDataURL(file);
        }

        function removeNewImage(fileName) {
            uploadedImages = uploadedImages.filter(f => f.name !== fileName);
            const cards = newImagePreview.children;
            for (let card of cards) {
                if (card.textContent.includes(fileName)) {
                    newImagePreview.removeChild(card);
                    break;
                }
            }
        }

        function eliminarImagen(id) {
            if (confirm('¬øEst√° seguro de eliminar esta imagen?')) {
                alert(`Imagen ${id} eliminada. Conectar con Django para eliminar del servidor`);
            }
        }

        // Form submission
        document.getElementById('editOrganismForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                tipo: document.querySelector('input[name="tipo"]:checked').value,
                nombre_cientifico: document.getElementById('nombre_cientifico').value,
                cepa: document.getElementById('cepa').value,
                reino: document.getElementById('reino').value,
                filo: document.getElementById('filo').value,
                clase: document.getElementById('clase').value,
                orden: document.getElementById('orden').value,
                familia: document.getElementById('familia').value,
                origen: document.getElementById('origen').value,
                ubicacion: document.getElementById('ubicacion').value,
                fecha_aislamiento: document.getElementById('fecha_aislamiento').value,
                color_colonia: document.getElementById('color_colonia').value,
                forma_colonia: document.getElementById('forma_colonia').value,
                medio_cultivo: document.getElementById('medio_cultivo').value,
                temperatura: document.getElementById('temperatura').value,
                ph_optimo: document.getElementById('ph_optimo').value,
                imagenes_nuevas: uploadedImages.map(f => f.name)
            };

            console.log('Datos del organismo:', formData);
            alert('Organismo actualizado exitosamente!\n\nConectar con Django para guardar en BD');
        });

        function cancelarEdicion() {
            if (confirm('¬øEst√° seguro de cancelar? Los cambios no guardados se perder√°n.')) {
                window.location.href = '/organismos';
            }
        }

        function exportarFicha() {
            alert('Exportar ficha t√©cnica del organismo en PDF\nConectar con Django');
        }
    </script>
</body>
</html>